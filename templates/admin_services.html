{% extends "base.html" %}
{% block content %}
<section>
  <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;">
    <h1>Управление автосервисами</h1>
    <div style="display:flex;gap:8px;align-items:center;">
      <a class="btn" href="/admin/feedback">Модерация отзывов</a>
      <form method="post" action="/admin/logout">
        <button class="btn" type="submit">Выйти</button>
      </form>
    </div>
  </div>

  <h2 style="margin-top:16px;">Добавить новый</h2>
  <form method="post" action="/admin/services/new" class="card" style="padding:16px;display:grid;gap:12px;">
    <label class="field">
      <span>Название</span>
      <input name="name" required />
    </label>
    <label class="field">
      <span>Описание</span>
      <textarea name="description" rows="3"></textarea>
    </label>
    <button class="btn primary" type="submit">Добавить</button>
  </form>

  <h2 style="margin-top:24px;">Существующие</h2>
  {% if services|length == 0 %}
    <p class="muted">Пока пусто.</p>
  {% else %}
    <ul class="list">
    {% for s in services %}
      <li class="list-item">
        <form method="post" action="/admin/services/{{ s.id }}/edit" style="display:flex;flex:1;gap:8px;align-items:flex-start;">
          <div style="flex:1;display:grid;gap:8px;">
            <input name="name" value="{{ s.name }}" required />
            <textarea name="description" rows="2">{{ s.description }}</textarea>
          </div>
          <div style="display:flex;flex-direction:column;gap:8px;">
            <button class="btn" type="submit">Сохранить</button>
            <form method="post" action="/admin/services/{{ s.id }}/delete">
              <button class="btn" type="submit">Удалить</button>
            </form>
          </div>
        </form>
      </li>
    {% endfor %}
    </ul>
  {% endif %}
</section>
{% endblock %}


